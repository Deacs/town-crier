{"version":3,"sources":["stream.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var $shouts = $('.shouts');\n\nvar typeMeta = {\n    1: {\n        'panel': 'warning',\n        'icon': 'piggy-bank'\n    },\n    2: {\n        panel: 'success',\n        icon: 'glass'\n    },\n    3: {\n        'panel': 'danger',\n        'icon': 'flash'\n    },\n    4: {\n        'panel': 'info',\n        'icon': 'user'\n    },\n    5: {\n        'panel': 'success',\n        'icon': 'cloud-upload'\n    },\n    6: {\n        'panel': 'info',\n        'icon': 'flag'\n    }\n};\n\nvar choreMsgData = {\n    refresh: {\n        'title': 'Clean up on aisle 4',\n        'text': 'We are having a quick clean up. Hold on to your hat!'\n    },\n    rewind: {\n        'title': 'Rewind!',\n        'text': 'Let\\'s take it back ...... way back'\n    }\n}\n\n// Tasks performed by the Janitor\nsocket.on(\"town-crier:App\\\\Events\\\\Chore\", function(task) {\n\n    var data    = task.data,\n        action  = data.action ;\n\n    if (action !== null) {\n\n        if (action == 'refresh' || action == 'rewind') {\n\n            var msgData = choreMsgData[action];\n\n            swal({\n                title: msgData.title,\n                text: msgData.text,\n                type: \"info\",\n                showConfirmButton: false,\n                timer: 5000,\n            }, function(){\n                location.reload();\n            });\n        }\n    }\n\n});\n\nsocket.on(\"town-crier:App\\\\Events\\\\Shout\", function(message) {\n\n    if (message.data !== null) {\n\n        // Check for the empty stream message and remove if found\n        $('#empty_message_item').remove();\n\n        var data = message.data.announcement,\n            type = typeMeta[data.type_id];\n\n        var panel = $('<div class=\"list-group-item list-group-item-'+type.panel+'\">'+\n            '<h4 class=\"shout-title\"><span class=\"glyphicon glyphicon-'+type.icon+' shout-type\"></span>'+data.title+'</h4>'+\n            '<div>'+\n            data.body+\n            '</div>'+\n            '<div class=\"author\">'+data.author+', '+moment().calendar()+' <span class=\"glyphicon glyphicon glyphicon-time\"></span></div>'+\n            '</div>').hide().fadeIn(250);\n\n        // Display the latest Shout\n        $shouts.prepend(panel);\n    }\n    else {\n        swal({\n            title: 'Whoops',\n            text: 'Tumbleweed! Please report this error',\n            type: \"error\",\n            showConfirmButton: false,\n            timer: 5000,\n        });\n    }\n\n});\n\n// For each of the following elements that are found,\n// update the outlying element to swap out the type for a bootstrap style\n// and find the icon and swap out for the correct version\nvar swapPanelStyles = function() {\n    for (var key in typeMeta) {\n        // skip loop if the property is from prototype\n        if (!typeMeta.hasOwnProperty(key)) continue;\n\n        var obj = typeMeta[key];\n\n        for (var prop in obj) {\n            // skip loop if the property is from prototype\n            if(!obj.hasOwnProperty(prop)) continue;\n\n            $('.'+key).addClass('list-group-item-' + obj.panel)\n                .find('.shout-type')\n                .addClass('glyphicon-' + obj.icon);\n        }\n    }\n}\n\n// Callback function to fade in the shout stream\n// Allows a delay in order to manipulate the css\nvar displayStream = function() {\n    $shouts.fadeIn(1000);\n}\n\n$(document).ready(function() {\n\n    swapPanelStyles(displayStream());\n\n});\n"],"sourceRoot":"/source/"}